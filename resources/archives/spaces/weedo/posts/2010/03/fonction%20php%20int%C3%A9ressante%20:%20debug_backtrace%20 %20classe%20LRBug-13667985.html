<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<link href='../../../exports.css' rel='stylesheet'>
<link href='../../../exports.css' rel='stylesheet'>

</head>
<body>
<div id='wrap'>
<div id='header'>
<h1>weedo tech blog</h1>
<h2>This is an archived post
This is an archived post
</h2>
</div>
<div id='content'><div id='nav'>
<a href="../../../posts/2010/03/fonction%20php%20int%C3%A9ressante%20:%20error_log-13739052.html">Previous</a>
&nbsp; 
<a href="../../../index-5.html">Index</a>
&nbsp; 
<a href="../../../posts/2010/03/Nouvel%20IDE%20pour%20Mac%20:%20WebStorm-13126296.html">Next</a>
</div>
<div class='post'>
<div class='post_header'>
<h3>fonction php intéressante : debug_backtrace + classe LRBug</h3>
<div class='post_info'>
<span class='post_time'>March 16 2010, 10:05 AM</span>
<span class='author'>&nbsp;by Karim Cassam Chenaï</span>
</div>
</div>
<div class='post_body'><a href="http://php.net/manual/fr/function.debug-backtrace.php">http://php.net/manual/fr/function.debug-backtrace.php</a> <p /> Si vous avez un bug aléatoire difficile à reproduire et que vous souhaitez voir le contexte du bug (notamment l'appelant), la fonction php debug_backtrace() permet d'avoir cette info. Combiné avec un envoi de mail (ou création d'un log), ça peut aider à debbuger le problème. <p /> J'ai créé une petite classe LRBug (class/class.lr.bug.php) bien pratique pour gérer la création du log ou l'envoi du mail <p /> Voir par ex. sur lux, dans class.dbswitch.php : <br /> $query = $dbh->query($sql); <p />  if ($query === false) { <br /> $lrBug = New LRBug(); <br /> $lrBug->add('$env vaut '.$env);		 $lrBug->add("\n"); <br /> $lrBug->add("Bug, requête SQL invalide, file : '".__FILE__."', line : '".__LINE__."'");		 $lrBug->add("\n"); <br /> $lrBug->add("sql vaut:".$sql); <br /> $lrBug->add("backtrace vaut:".serialize(( debug_backtrace()))); $lrBug->setOutputMod("mail"); <br /> $lrBug->getContent(); <br /> return(false); <br /> }</div>
<div class='post_responses'>
<h4>338 views and 0 responses</h4>
<ul class='post_responses list'>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
