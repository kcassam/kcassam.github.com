<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<link href='../../../exports.css' rel='stylesheet'>
<link href='../../../exports.css' rel='stylesheet'>

</head>
<body>
<div id='wrap'>
<div id='header'>
<h1>weedo tech blog</h1>
<h2>This is an archived post
This is an archived post
</h2>
</div>
<div id='content'><div id='nav'>
<a href="../../../posts/2010/07/markdown%20starter%20template-21762028.html">Previous</a>
&nbsp; 
<a href="../../../index-4.html">Index</a>
&nbsp; 
<a href="../../../posts/2010/06/bug%20t%C3%A9l%C3%A9chargement%20fichier%20octet%20stream-20780627.html">Next</a>
</div>
<div class='post'>
<div class='post_header'>
<h3>Centrer une carte OpenLayers sur sa position actuelle avec JS</h3>
<div class='post_info'>
<span class='post_time'>July  1 2010,  8:05 AM</span>
<span class='author'>&nbsp;by mysterty</span>
</div>
</div>
<div class='post_body'><p>Bonjour,</p>
<p>Voici le code pour centrer la carte sur sa position actuelle :</p>
<p><span class="comment">
<div class="CodeRay">
  <div class="code"><pre><code>
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/span&gt;$('btCurrentPosition').observe('click', getLocation);
    function getLocation(){
        navigator.geolocation.getCurrentPosition(LocationOK, LocationKO);
    }
    function LocationOK(position)
    {
        //Feature
        var point = new OpenLayers.Geometry.Point(position.coords.longitude,position.coords.latitude);
        var pointProj = new OpenLayers.Projection.transform(
            point,
            new OpenLayers.Projection(&quot;EPSG:4326&quot;),
            new OpenLayers.Projection(&quot;IGNF:GEOPORTALFXX&quot;) // IMPORTANT : ICI il faut être sûr d'utiliser la bonne Projection, pour la connaître, décommenter la ligne suivante :
            // alert(map.getMap().getProjection());
        );
        map.getMap().setCenter(new OpenLayers.LonLat(pointProj.x, pointProj.y), 6);
    }
    function LocationKO()
    {
        alert('Votre localisation est impossible, vérifiez que cette option est activée sur votre mobile');
    }</code></pre></div>
</div>
</span></p></div>
<div class='post_responses'>
<h4>352 views and 0 responses</h4>
<ul class='post_responses list'>
</ul>
</div>
</div>
</div>
</div>
</body>
</html>
